<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoselin Continuous Falling Fireworks</title>
    <style>
        /* Basic page setup */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevents scrollbars */
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            cursor: pointer; /* Indicate it's interactive */
            -webkit-tap-highlight-color: transparent; 
        }

        /* Message to guide the user */
        #message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #444;
            text-align: center;
            font-size: 1.5rem;
            user-select: none;
            pointer-events: none; 
            transition: opacity 0.5s ease-in-out;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Styling for each letter particle */
        .particle {
            position: absolute; 
            font-size: 2rem; 
            font-weight: bold;
            user-select: none; 
            pointer-events: none; 
            
            /* The burst and falling animation is 1.0s */
            animation: burst 1.0s ease-in forwards; 
        }

        /* * The animation combines initial random spread (tx/ty) 
         * with a fixed, strong downward movement (the +800px drop)
        */
        @keyframes burst {
            0% {
                /* Start at click origin */
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                /* * Spread horizontally (tx), spread vertically (ty), 
                 * AND add a strong fixed drop (+800px) to simulate gravity.
                */
                transform: translate(calc(var(--tx) - 50%), calc(var(--ty) - 50% + 800px)) scale(0.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <div id="message">Click and hold (or tap and drag) to spew the current letter!</div>

    <script>
        // --- Setup ---
        const targetWord = "Yoselin";
        let letterIndex = 0; 

        const particleCount = 30; 
        const burstRadius = 200;  
        const spewDelay = 50; // Milliseconds between each spew (higher is slower)

        // State for continuous spewing
        let spewInterval = null;
        let spewX = 0;
        let spewY = 0;

        // A wider range of bright, colorful firework-like colors
        const colors = [
            '#FFD700', // Gold
            '#FF69B4', // Hot Pink
            '#00FFFF', // Cyan
            '#7FFF00', // Chartreuse
            '#FF4500', // Orange-Red
            '#FFFFFF', // White
            '#9400D3', // Dark Violet
            '#ADFF2F', // GreenYellow
            '#FFA07A', // LightSalmon
            '#1E90FF'  // DodgerBlue
        ];

        const messageEl = document.getElementById('message');
        let firstInteraction = true;

        /**
         * Main function to create a firework burst at the tracked spew position.
         * Note: This function no longer increments letterIndex.
         */
        function createBurst(x, y) {
            // Get the current letter and color based on the current index
            const currentLetter = targetWord[letterIndex];
            const currentColor = colors[letterIndex % colors.length]; // Use index for consistent color during spew

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = currentLetter;
                particle.style.color = currentColor;

                // Set the starting position
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;

                // Calculate random destination
                const angle = Math.random() * Math.PI * 2; 
                const radius = Math.random() * burstRadius; 
                
                const tx = Math.cos(angle) * radius;
                const ty = Math.sin(angle) * radius;

                // Set the CSS variables for the animation
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);

                document.body.appendChild(particle);

                // Clean up: remove the particle after its animation ends
                particle.addEventListener('animationend', () => {
                    particle.remove();
                });
            }
        }
        
        // --- Event Handlers for Continuous Spewing ---

        /**
         * Starts the continuous spewing animation loop.
         */
        function startSpewing(x, y) {
            if (spewInterval !== null) return; // Already spewing

            if (firstInteraction) {
                messageEl.style.opacity = 0; 
                firstInteraction = false;
            }

            // Set initial position
            spewX = x;
            spewY = y;

            // Start the interval that continuously calls createBurst
            spewInterval = setInterval(() => {
                // The burst is created at the currently tracked spewX/spewY
                createBurst(spewX, spewY);
            }, spewDelay);

            document.body.style.cursor = 'crosshair'; // Visual feedback for drawing
        }

        /**
         * Stops the spewing animation loop and advances to the next letter.
         */
        function stopSpewing() {
            if (spewInterval === null) return;

            clearInterval(spewInterval);
            spewInterval = null;

            // Advance to the next letter/color only when the user releases
            letterIndex = (letterIndex + 1) % targetWord.length;
            
            document.body.style.cursor = 'pointer'; 
        }

        // 1. POINTER DOWN (Start Spewing)
        document.addEventListener('pointerdown', (e) => {
            if (e.isPrimary) {
                document.body.setPointerCapture(e.pointerId); // Capture pointer for smooth dragging
                startSpewing(e.clientX, e.clientY);
            }
        });

        // 2. POINTER MOVE (Update Spewing Position)
        document.addEventListener('pointermove', (e) => {
            if (spewInterval !== null && e.isPrimary) {
                // Update the tracked spew position so the bursts follow the pointer
                spewX = e.clientX;
                spewY = e.clientY;
            }
        });

        // 3. POINTER UP (Stop Spewing and Advance Letter)
        document.addEventListener('pointerup', (e) => {
            if (e.isPrimary) {
                document.body.releasePointerCapture(e.pointerId);
                stopSpewing();
            }
        });

    </script>
</body>
</html>
