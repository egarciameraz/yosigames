<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pink Firework Splash</title>
    <style>
        /* Basic page setup */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevents scrollbars */
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            
            /* Cursors and touch feedback */
            cursor: pointer;
            -webkit-tap-highlight-color: transparent; /* Removes blue flash on tap */
        }

        /* Initial prompt text */
        #prompt {
            color: #444;
            text-align: center;
            margin-top: 45vh;
            font-size: 1.2rem;
            user-select: none; /* Prevents text selection */
            animation: fadeIn 2s ease-in-out;
            /* Make sure prompt doesn't block clicks */
            pointer-events: none; 
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Styling for the permanent color splash (now 40px, half size) */
        .color-splash {
            position: absolute; 
            width: 40px; 
            height: 40px;
            border-radius: 50%; /* Makes it circular */
            background-color: var(--splash-color); /* Color set by JS */
            opacity: 0; /* Start hidden */
            transform: translate(-50%, -50%) scale(0.1); /* Start small and centered */
            animation: splashIn 1s ease-out forwards;
            user-select: none; 
            pointer-events: none; 
            mix-blend-mode: screen; /* Makes colors blend nicely on black background */
        }
        
        /* Animation for the splash to grow and fade in */
        @keyframes splashIn {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.1);
            }
            50% {
                opacity: 0.6; /* Max opacity */
                transform: translate(-50%, -50%) scale(1.2); /* Slight overshoot */
            }
            100% {
                opacity: 0.4; /* Final opacity, slightly transparent */
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Styling for each particle (The Firework Burst) */
        .particle {
            position: absolute; 
            font-size: 1.5rem; /* Slightly larger font for the bigger burst */
            font-weight: bold;
            user-select: none; 
            pointer-events: none; 
            
            /* The burst animation */
            animation: burst 1.0s ease-out forwards;
        }

        /* This animation makes the particle burst outwards */
        @keyframes burst {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                /* Use CSS variables set by JS for the final random position */
                transform: translate(calc(var(--tx) - 50%), calc(var(--ty) - 50%)) scale(0);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <p id="prompt">Tap and drag or click and hold to paint with pink firework splashes!</p>

    <script>
        // --- Setup ---
        const targetWord = "Yoselin"; // Still used for particles, but not for forming a word
        let letterIndex = 0; // Tracks which letter of "Yoselin" to use for burst particles

        const particleCount = 20; // How many particles per burst
        // Burst radius doubled from 80 to 160
        const burstRadius = 160;   

        // Pinkish colors only!
        const colors = [
            '#FFC0CB', // Pink
            '#FF69B4', // Hot Pink
            '#FF1493', // Deep Pink
            '#DA70D6', // Orchid
            '#EE82EE', // Violet
            '#C71585', // Medium Violet Red
            '#DB7093'  // Pale Violet Red
        ];

        let firstClick = true;
        const promptEl = document.getElementById('prompt');

        // --- Dragging State and Throttling ---
        let isDrawing = false;
        let lastEffectTime = 0;
        const throttleDelay = 50; // Milliseconds between effects during drag (20 effects per second max)
        
        /**
         * Main function to create a firework burst and a color splash
         * @param {number} x - The horizontal coordinate of the click/tap
         * @param {number} y - The vertical coordinate of the click/tap
         */
        function createEffect(x, y) {
            // Hide the prompt on the first interaction
            if (firstClick) {
                promptEl.style.display = 'none';
                firstClick = false;
            }

            const currentLetter = targetWord[letterIndex]; // For burst particles
            const currentColor = colors[Math.floor(Math.random() * colors.length)]; // Random pinkish color

            // --- 1. Create the PERMANENT color splash ---
            const splash = document.createElement('div');
            splash.className = 'color-splash';
            splash.style.setProperty('--splash-color', currentColor); // Set CSS variable for color
            splash.style.left = `${x}px`;
            splash.style.top = `${y}px`;
            document.body.appendChild(splash);
            
            // --- 2. Create the TEMPORARY burst of particles (The Firework) ---
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = currentLetter; // Still use letters for the burst
                particle.style.color = currentColor;

                // Set the starting position to the click coordinate
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;

                // Calculate a random destination for the particle
                const angle = Math.random() * Math.PI * 2; 
                const radius = Math.random() * burstRadius; 
                const tx = Math.cos(angle) * radius;
                const ty = Math.sin(angle) * radius;

                // Set the CSS variables for this particle's animation
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);

                // Clean up: remove the particle after its animation ends
                particle.addEventListener('animationend', () => {
                    particle.remove();
                });
                
                document.body.appendChild(particle);
            }

            // Move to the next letter for the next burst
            letterIndex = (letterIndex + 1) % targetWord.length;
        }

        // --- Event Listeners for Dragging ---
        
        // Start drawing when the pointer (mouse or touch) goes down
        document.addEventListener('pointerdown', (e) => {
            if (e.isPrimary) {
                isDrawing = true;
                // Capture the pointer to ensure moves are tracked smoothly
                document.body.setPointerCapture(e.pointerId); 
                // Create the first effect immediately
                createEffect(e.clientX, e.clientY);
            }
        });

        // Continue drawing while the pointer moves and is held down
        document.addEventListener('pointermove', (e) => {
            if (isDrawing && e.isPrimary) {
                const currentTime = Date.now();
                // Throttle the calls to prevent creating thousands of elements too fast
                if (currentTime - lastEffectTime > throttleDelay) {
                    createEffect(e.clientX, e.clientY);
                    lastEffectTime = currentTime;
                }
            }
        });

        // Stop drawing when the pointer is released
        document.addEventListener('pointerup', (e) => {
            if (e.isPrimary) {
                isDrawing = false;
                document.body.releasePointerCapture(e.pointerId);
            }
        });

    </script>
</body>
</html>
